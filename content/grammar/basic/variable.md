---
date: 2019-03-05T07:00:00+08:00
title: 变量
menu:
  main:
    parent: "grammar-basic"
weight: 311
description : "Rust中d的变量"
---

### 不可变变量

变量默认是不可改变的（immutable），这是Rust 提供的安全性和简单并发性来编写代码的众多方式之一。

let 关键字用于定义变量，默认定义的是不可变变量：

```rust
fn main() {
    // 可以通过类型推导得到变量类型，因此可以不制定变量类型
    let a = 1;
    // 也可以明确指定变量类型
    let b: bool = true;
}
```

Rust 编译器保证，如果声明一个值不会变，它就真的不会变。这意味着当阅读和编写代码时，不需要追踪一个值如何和在哪可能会被改变，从而使得代码易于推导。

### 可变变量

变量只是默认不可变；正如在第二章所做的那样，你可以在变量名之前加 mut 来使其可变。除了允许改变值之外，mut 向读者表明了其他代码将会改变这个变量值的意图。

```rust
fn main() {
    let mut x = 5;
    println!("The value of x is: {}", x);
    x = 6;
    println!("The value of x is: {}", x);
}
```

### 权衡使用

- 使用大型数据结构时，适当地使用可变变量，可能比复制和返回新分配的实例更快
- 对于较小的数据结构，总是创建新实例，采用更偏向函数式的编程风格，可能会使代码更易理解，为可读性而牺牲性能或许是值得的


### 其他

当多种类型均有可能时，必须增加类型注解：

```rust
let guess: u32 = "42".parse().expect("Not a number!");
```